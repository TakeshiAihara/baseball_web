{% extends 'base.html' %}
{% block title %}TOP - é€šç®—ã‚µãƒãƒªãƒ¼{% endblock %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='top.css') }}">
<h1>é‡çƒã‚¢ãƒ—ãƒª TOP</h1>
<nav>
  <a href="/">TOP</a> |
  <a href="/record">è©¦åˆè¨˜éŒ²</a> |
  <a href="/summary">é€šç®—æˆç¸¾</a> |
  <a href="/players">é¸æ‰‹æˆç¸¾</a> |
  <a href="/about">ãã®ä»–</a>
</nav>

<div class="top-summary-cards">
  <div class="top-summary-card">
    <div class="top-summary-title">é€šç®—å‹ç‡</div>
    <div class="top-summary-value">
      <span class="top-value">{{ summary['é€šç®—å‹ç‡'] if summary else '-' }}</span>
    </div>
  </div>
  <div class="top-summary-card">
    <div class="top-summary-title">é€šç®—è¦³æˆ¦æ•°</div>
    <div class="top-summary-value">
      <span class="top-value">{{ summary['é€šç®—è¦³æˆ¦æ•°'] if summary else '-' }}</span>
      <span class="top-sub">è©¦åˆ</span>
    </div>
  </div>
  <div class="top-summary-card">
    <div class="top-summary-title">ç¾åœ¨ã®æ³¢</div>
    <div class="top-summary-value">
      <span class="top-value">{{ summary['ç¾åœ¨ã®æ³¢'] if summary and summary['ç¾åœ¨ã®æ³¢'] else '-' }}</span>
      <i class="fas fa-wave-square"></i>
    </div>
  </div>
  <div class="top-summary-card">
    <div class="top-summary-title">ç›´è¿‘5è©¦åˆ</div>
    <div class="top-recent-matches">
      {% if summary and summary['ç›´è¿‘5è©¦åˆ'] %}
        {% for rec in summary['ç›´è¿‘5è©¦åˆ'] %}
          <span class="top-result5-{{ rec['å‹æ•—'] }}">{{ rec['å‹æ•—'][0] }}</span>
        {% endfor %}
      {% else %}-{% endif %}
    </div>
  </div>
  <div class="top-summary-card summary-wide">
    <div class="top-summary-title">é€šç®—æˆç¸¾</div>
    <div class="top-summary-value top-summary-flex">
      {% if summary and summary['é€šç®—æˆç¸¾'] %}
        <span class="top-win">{{ summary['é€šç®—æˆç¸¾']['å‹'] }}å‹</span>
        <span class="top-lose">{{ summary['é€šç®—æˆç¸¾']['æ•—'] }}æ•—</span>
        <span class="top-draw">{{ summary['é€šç®—æˆç¸¾']['å¼•åˆ†'] }}åˆ†</span>
      {% else %}-{% endif %}
    </div>
  </div>
  <div class="top-summary-card">
    <div class="top-summary-title"><span class="top-icon">ğŸ </span>æœ¬æ‹ åœ°æˆç¸¾</div>
    <div class="top-summary-value top-summary-flex">
      {% if summary and summary['ãƒ›ãƒ¼ãƒ æˆç¸¾'] %}
        <span class="top-win">{{ summary['ãƒ›ãƒ¼ãƒ æˆç¸¾']['å‹'] }}å‹</span>
        <span class="top-lose">{{ summary['ãƒ›ãƒ¼ãƒ æˆç¸¾']['æ•—'] }}æ•—</span>
        <span class="top-draw">{{ summary['ãƒ›ãƒ¼ãƒ æˆç¸¾']['å¼•åˆ†'] }}åˆ†</span>
      {% else %}-{% endif %}
    </div>
    <div class="top-summary-sub">
      {% if summary and summary['ãƒ›ãƒ¼ãƒ æˆç¸¾'] %}
        å‹ç‡ <span class="top-subrate">{{ summary['ãƒ›ãƒ¼ãƒ æˆç¸¾']['å‹ç‡'] if summary['ãƒ›ãƒ¼ãƒ æˆç¸¾'].get('å‹ç‡') else '-' }}</span>
      {% endif %}
    </div>
  </div>
  <div class="top-summary-card">
    <div class="top-summary-title"><span class="top-icon">ğŸŸï¸</span>ãƒ“ã‚¸ã‚¿ãƒ¼æˆç¸¾</div>
    <div class="top-summary-value top-summary-flex">
      {% if summary and summary['ãƒ“ã‚¸ã‚¿ãƒ¼æˆç¸¾'] %}
        <span class="top-win">{{ summary['ãƒ“ã‚¸ã‚¿ãƒ¼æˆç¸¾']['å‹'] }}å‹</span>
        <span class="top-lose">{{ summary['ãƒ“ã‚¸ã‚¿ãƒ¼æˆç¸¾']['æ•—'] }}æ•—</span>
        <span class="top-draw">{{ summary['ãƒ“ã‚¸ã‚¿ãƒ¼æˆç¸¾']['å¼•åˆ†'] }}åˆ†</span>
      {% else %}-{% endif %}
    </div>
    <div class="top-summary-sub">
      {% if summary and summary['ãƒ“ã‚¸ã‚¿ãƒ¼æˆç¸¾'] %}
        å‹ç‡ <span class="top-subrate">{{ summary['ãƒ“ã‚¸ã‚¿ãƒ¼æˆç¸¾']['å‹ç‡'] if summary['ãƒ“ã‚¸ã‚¿ãƒ¼æˆç¸¾'].get('å‹ç‡') else '-' }}</span>
      {% endif %}
    </div>
  </div>
</div>

<h2>ç›´è¿‘5è©¦åˆ</h2>
{% if summary and summary['ç›´è¿‘5è©¦åˆ'] %}
  <table class="top-recent-table">
    <thead>
      <tr>
        <th>æ—¥ä»˜</th>
        <th>ç›¸æ‰‹ãƒãƒ¼ãƒ </th>
        <th>å¾—ç‚¹</th>
        <th>å¤±ç‚¹</th>
        <th>å‹æ•—</th>
      </tr>
    </thead>
    <tbody>
      {% for rec in summary['ç›´è¿‘5è©¦åˆ'] %}
      <tr>
        <td>{{ rec['æ—¥ä»˜'][:10] }}</td>
        <td>{{ rec['ç›¸æ‰‹ãƒãƒ¼ãƒ '] }}</td>
        <td>{{ rec['å¾—ç‚¹'] }}</td>
        <td>{{ rec['å¤±ç‚¹'] }}</td>
        <td><span class="top-result-{{ rec['å‹æ•—'] }}">{{ rec['å‹æ•—'] }}</span></td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p>è©¦åˆãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã€‚</p>
{% endif %}
{% endblock %}
